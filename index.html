<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script type="text/javascript" src="network-mixins.js"></script>
	<script type="text/javascript" src="visualiser-mixins.js"></script>
</head>
<body>
	
	<button id="start-button">start</button>
	
	<script type="text/javascript">
		
		var Generator = function() {
			
			var self = this;
			
			this._timer;
			
			this._outputs = [];
			
			this.onTrigger = function() {
			
				self.fire();
			};
		}
		
		asOutputProvider.call(Generator.prototype, { number : 1 });	
		
		asTimedOperation.call(Generator.prototype, { period : 1000 });
		
		
		
		
		
		
		var Generator2 = function() {
			
			var self = this;
			
			this._timer;
			
			this._outputs = [];
			
			this.onTrigger = function() {
			
				self.fire();
			};
		}	
		
		asTimedOperation.call(Generator2.prototype, { period : 750 });
		
		asOutputProvider.call(Generator2.prototype, { number : 1 });		
		





		
		var Acceptor = function(name, x, y) {
				
			var self = this;
		
			this.x = x;
			this.y = y;
			this.radius = 10;
		
			this._outputs = [];
			
			this.onInput = function() {
				
				self.fire();
			};
		}
		
		asOutputProvider.call(Acceptor.prototype, { number : 1 });		
		
		asInputAccepter.call(Acceptor.prototype, { number : 1 });		
		
		
		asRenderableElement.call(Acceptor.prototype, { renderer : document });
		
		
		
		var leaf = new Acceptor('leaf', 100, 100);
		
		var wire = new Acceptor('wire', 100, 200);
		wire.pipeTo(leaf);

		var gen = new Generator();
		gen.pipeTo(wire);
		gen.start();
		//gen.fire();
		
		
		
		var gen2 = new Generator2();
		gen2.pipeTo(leaf);
		gen2.start();
		
		
		
		leaf.render();
		wire.render();
		
		
		console.log(leaf);
		
		
		document.getElementById('start-button').onclick = function() {
		
			gen.fire();
		};
		
	</script>
	
	
</body>
</html>